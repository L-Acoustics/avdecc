# Different JSON schemas

This directory contains the JSON schemas used to validate the JSON dump files generated by the library.
- The `common` directory contains common schema definitions used by the other schemas.
- The `AEM` directory contains the schemas used to validate the JSON dump files generated by the library for the AEM entity model tree (.AEMT files).
- the `AVE` directory contains the schemas used to validate the JSON dump files generated by the library for a Virtual Entity or Entity Model (.AVE and .AEM files).

---
# How to update the JSON schemas

The algorithm used by the library to generate dump files that comply with the schemas can be found in the following source files:
- For the entity model tree, see the `src/entity/entityModelJsonSerializer.cpp` file.
- For the static descriptors properties, see the `include/la/avdecc/internals/jsonTypes.hpp` file.
- For more details about the static descriptors themselves, see the `include/la/avdecc/internals/entityModelTreeStatic.hpp` file.

## AEM schema (AEMT files)
When a new `aem format version` is released, a new AEM schema named `schema.json` should be created and stored in a subfolder of the `AEM` directory which is named after the `aem format version`. The `aem_format_version` field should strictly check for the exact version of the AEM file. The `aem_format_version` is controlled by the `ControlledEntity_AemVersion` variable from `src/controller/avdeccControllerJsonTypes.hpp`.

When a minor revision of a schema needs to be made, simply update the `schema_version` field in the affected `schema.json` file.

## AVE schema (AVE and AEM files)
When a new `dump version` is released, a new AEM schema named `schema.json` should be created and stored in a subfolder of this directory which is named after the `dump version`. The `dump_version` field should strictly check for the exact version of the dump file. The `dump_version` is controlled by the `ControlledEntity_DumpVersion` variable from `src/controller/avdeccControllerJsonTypes.hpp`.

When a minor revision of a schema needs to be made, simply update the `schema_version` field in the affected `schema.json` file.
